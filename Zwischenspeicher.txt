import { useState, useEffect } from "react";
import data from "./data";
import categories from "./categories";

import IncomeExpenseForm from "./IncomeExpenseForm";
import BudgetOverviewDisplay from "./Overview/BudgetOverviewDisplay";
import BudgetMonthDisplay from "./Overview/BudgetMonthDisplay";

import "./App.css";

const myData = [
  {
    id: 1,
    type: "income",
    category: 1,
    title: "Gehalt",
    amount: 2500,
    date: new Date(2021, 1, 3), // 1 ist Februar!
  },
  {
    id: 2,
    type: "expense",
    category: 11,
    title: "Miete",
    amount: 800.0,
    date: new Date(2021, 1, 10),
  },
  {
    id: 3,
    type: "expense",
    category: 14,
    title: "Edeka",
    amount: 37.59,
    date: new Date(2021, 1, 5),
  },
  {
    id: 4,
    type: "expense",
    category: 14,
    title: "REWE",
    amount: 13.89,
    date: new Date(2021, 1, 8),
  },
  {
    id: 5,
    type: "expense",
    category: 12,
    title: "SWM",
    amount: 103.0,
    date: new Date(2021, 1, 10),
  },
];

function App() {
  const [newIncomeExpense, setNewIncomeExpense] = useState(myData);
  const [monthInformation, setMonthInformation] = useState(false);
  const [selectedYear, setSelectedYear] = useState(false);

  const saveExpenseDataHandler = (newIncomeExpenseData) => {
    setNewIncomeExpense((existingData) => {
      return [newIncomeExpenseData, ...existingData];
    });
  };

  // const [showDistinctMonth, setShowDistinctMonth] = useState(false);

  // TODO later

  console.log(monthInformation);

  // const displayMonthAtBottom = (singleMonthData) => {
  //   setShowDistinctMonth(true);
  //   setMonthInformation(singleMonthData);
  // };

  // let distinctMonthContent = (
  //   <p>
  //     Bitte klicken Sie auf einen Monatsbalken um sich die Details anzeigen zu
  //     lassen.
  //   </p>
  // );

  // const [selectedYear, setSelectedYear] = useState("");
  // const yearToDisplay = (year) => {
  //   setSelectedYear(year);
  // };

  console.log(selectedYear);

  // if (showDistinctMonth === true) {
  //   distinctMonthContent = (
  //     <BudgetMonthDisplay
  //       className={"budget-month-canvas"}
  //       selectedYear={selectedYear}
  //       monthInformation={monthInformation}
  //       data={newIncomeExpense}
  //     />
  //   );
  // }

  return (
    <div className="App">
      <div className="app-canvas">
        <h1>Einnahmen - Ausgaben</h1>
        <IncomeExpenseForm
          data={newIncomeExpense}
          categories={categories}
          onSaveIncomeExpense={saveExpenseDataHandler}
        />
        <BudgetOverviewDisplay
          data={newIncomeExpense}
          setMonthInformation={setMonthInformation}
          setSelectedYear={setSelectedYear}
        />
        {monthInformation ? (
          <BudgetMonthDisplay
            className={"budget-month-canvas"}
            selectedYear={selectedYear}
            monthInformation={monthInformation}
            data={newIncomeExpense}
          />
        ) : (
          <p>
            Bitte klicken Sie auf einen Monatsbalken um sich die Details
            anzeigen zu lassen.
          </p>
        )}
        {/* <BudgetMonthDisplay
          className={`budget-month-canvas ${!showDistinctMonth && "invalid"}`}
        /> */}
      </div>
    </div>
  );
}

export default App;
